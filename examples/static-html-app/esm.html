<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>前端静态HTML页面自动检测更新</title>
</head>

<body>

  <h2>前端静态HTML页面自动检测更新-示例-使用 ES 模块构建版本</h2>
  <div>随便修改下页面内容，部署到web服务器后，即可体验提示更新~！</div>
  <script type="module">
    import { createVersionPolling } from "https://unpkg.com/version-polling/dist/version-polling.esm.js";

    createVersionPolling({
      appETagKey: "__APP_ETAG__",
      pollingInterval: 5 * 1000,
      onUpdate: (self) => {
        const result = confirm("页面有更新，点击确定刷新页面！");
        if (result) {
          self.onRefresh();
        } else {
          self.onCancel();
        }
      },
    });
  </script>
</body>

</html>